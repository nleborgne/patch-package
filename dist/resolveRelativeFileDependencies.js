"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveRelativeFileDependencies = void 0;
const path_1 = require("./path");
function transformVersionString(version, appRootPath) {
    if (version.startsWith("file:") && version[5] !== "/") {
        return "file:" + path_1.resolve(appRootPath, version.slice(5));
    }
    else {
        return version;
    }
}
function resolveRelativeFileDependencies(appRootPath, resolutions) {
    const result = {};
    for (const packageName of Object.keys(resolutions)) {
        result[packageName] = transformVersionString(resolutions[packageName], appRootPath);
    }
    return result;
}
exports.resolveRelativeFileDependencies = resolveRelativeFileDependencies;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb2x2ZVJlbGF0aXZlRmlsZURlcGVuZGVuY2llcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9yZXNvbHZlUmVsYXRpdmVGaWxlRGVwZW5kZW5jaWVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlDQUFnQztBQUVoQyxTQUFTLHNCQUFzQixDQUFDLE9BQWUsRUFBRSxXQUFtQjtJQUNsRSxJQUFJLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtRQUNyRCxPQUFPLE9BQU8sR0FBRyxjQUFPLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUN4RDtTQUFNO1FBQ0wsT0FBTyxPQUFPLENBQUE7S0FDZjtBQUNILENBQUM7QUFFRCxTQUFnQiwrQkFBK0IsQ0FDN0MsV0FBbUIsRUFDbkIsV0FBOEM7SUFFOUMsTUFBTSxNQUFNLEdBQUcsRUFBdUMsQ0FBQTtJQUN0RCxLQUFLLE1BQU0sV0FBVyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7UUFDbEQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLHNCQUFzQixDQUMxQyxXQUFXLENBQUMsV0FBVyxDQUFDLEVBQ3hCLFdBQVcsQ0FDWixDQUFBO0tBQ0Y7SUFDRCxPQUFPLE1BQU0sQ0FBQTtBQUNmLENBQUM7QUFaRCwwRUFZQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlc29sdmUgfSBmcm9tIFwiLi9wYXRoXCJcclxuXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybVZlcnNpb25TdHJpbmcodmVyc2lvbjogc3RyaW5nLCBhcHBSb290UGF0aDogc3RyaW5nKSB7XHJcbiAgaWYgKHZlcnNpb24uc3RhcnRzV2l0aChcImZpbGU6XCIpICYmIHZlcnNpb25bNV0gIT09IFwiL1wiKSB7XHJcbiAgICByZXR1cm4gXCJmaWxlOlwiICsgcmVzb2x2ZShhcHBSb290UGF0aCwgdmVyc2lvbi5zbGljZSg1KSlcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHZlcnNpb25cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUmVsYXRpdmVGaWxlRGVwZW5kZW5jaWVzKFxyXG4gIGFwcFJvb3RQYXRoOiBzdHJpbmcsXHJcbiAgcmVzb2x1dGlvbnM6IHsgW3BhY2thZ2VOYW1lOiBzdHJpbmddOiBzdHJpbmcgfSxcclxuKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0ge30gYXMgeyBbcGFja2FnZU5hbWU6IHN0cmluZ106IHN0cmluZyB9XHJcbiAgZm9yIChjb25zdCBwYWNrYWdlTmFtZSBvZiBPYmplY3Qua2V5cyhyZXNvbHV0aW9ucykpIHtcclxuICAgIHJlc3VsdFtwYWNrYWdlTmFtZV0gPSB0cmFuc2Zvcm1WZXJzaW9uU3RyaW5nKFxyXG4gICAgICByZXNvbHV0aW9uc1twYWNrYWdlTmFtZV0sXHJcbiAgICAgIGFwcFJvb3RQYXRoLFxyXG4gICAgKVxyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0XHJcbn1cclxuIl19